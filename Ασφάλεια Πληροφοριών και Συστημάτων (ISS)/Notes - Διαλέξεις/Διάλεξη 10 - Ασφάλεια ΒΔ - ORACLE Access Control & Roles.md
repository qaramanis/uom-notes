#ΔΙΑΛΕΞΗ #ISS
# Ασφάλεια ΒΔ: ORACLE Access Control & Roles 
## Αρχείο PDF [[ISS-09.pdf]] ![[ISS-09.pdf]]
# Βασικοί Όροι
- **Ρόλοι**: Ονοματισμένες ομάδες προνομίων που παραχωρούνται σε χρήστες ή σε άλλους ρόλους
- **Σκοπός**: Διευκολύνουν την διαχείριση των προνομίων συστήματος και αντικειμένων
# Χαρακτηριστικά των Ρόλων
- **Περιορισμένος φόρτος διαχείρισης προνομίων** - Εύκολη διαχείριση πολλών χρηστών
- **Δυναμική διαχείριση προνομίων** - Μπορούν να τροποποιηθούν ανά πάσα στιγμή
- **Επιλεκτική διαθεσιμότητα προνομίων** - Ενεργοποίηση/απενεργοποίηση κατά βούληση
- **Ενημερωμένες εφαρμογές μέσω data dictionary** - Αυτόματη ενημέρωση του συστήματος
- **Ασφάλεια προσαρμοσμένη στην εφαρμογή** - Κατάλληλη αυθεντικοποίηση
# Τύποι ρόλων
### Ρόλοι Εφαρμογών (Application Roles)
- Περιέχουν όλα τα προνόμια για την εκτέλεση μιας συγκεκριμένης εφαρμογής
- Παραχωρούνται σε άλλους ρόλους ή συγκεκριμένους χρήστες
- Μια εφαρμογή μπορεί να έχει πολλούς διαφορετικούς ρόλους
### Ρόλοι Χρηστών
- Λειτουργούν όπως οι ομάδες (groups) χρηστών
- Ομαδοποιούν χρήστες με κοινές απαιτήσεις προνομίων
- Διευκολύνουν τη διαχείριση μέσω ιεραρχικής δομής
# Μηχανισμοί Ρόλων
- **Παραχώρηση προνομίων σε ρόλους**: Αντικειμένων ή συστήματος
- **Παραχώρηση ρόλων σε ρόλους**: Χωρίς κυκλική παραχώρηση
- **Παραχώρηση σε χρήστες**: Οποιοσδήποτε ρόλος σε οποιονδήποτε χρήστη
- **Κατάσταση ρόλων**: Ενεργοποιημένοι (enabled) ή απενεργοποιημένοι (disabled)
- **Έμμεση διαχείριση**: Έμμεσα παραχωρημένοι ρόλοι μπορούν να ελέγχονται άμεσα
# Διαχείριση Ρόλων
### Δημιουργία Ρόλων
- **Εντολή**: `CREATE ROLE` (SQL)
- **Απαιτούμενο προνόμιο**: `CREATE ROLE`
- **Αρχική κατάσταση**: Χωρίς προνόμια
- **Παράδειγμα**: `CREATE ROLE testrole1 IDENTIFIED BY uom;`
### Προκαθορισμένοι Ρόλοι ORACLE
- **CONNECT**: `CREATE SESSION`
- **RESOURCE**: Δημιουργία αντικειμένων (tables, procedures κ.λπ.)
- **DBA**: Όλα τα προνόμια συστήματος με `ADMIN OPTION`
- **SELECT_CATALOG_ROLE**: Πρόσβαση σε data dictionary views
### Διαγραφή Ρόλων
- **Εντολή**: `DROP ROLE`
- **Απαιτήσεις**: `DROP ANY ROLE` ή `ADMIN OPTION`
- **Συνέπειες**: Επηρεάζει όλα τα σχετικά πεδία ασφάλειας
# Παραχώρηση και Ανάκληση
### Παραχώρηση Προνομίων (GRANT)
- **Προνόμια συστήματος και ρόλοι**: `GRANT privilege/role TO user/role`
- **Προνόμια αντικειμένων**: `GRANT privilege ON object TO user/role`
- **Παράδειγμα**: `GRANT CREATE SESSION, testrole1 TO std0;`
### Ανάκληση Προνομίων (REVOKE)
- **Εντολή**: `REVOKE privilege/role FROM user/role`
- **Περιορισμός**: Ο ανακαλών πρέπει να είναι ο αρχικός παροχέας (για αντικείμενα)
- **Παράδειγμα**: `REVOKE SELECT, INSERT ON std FROM std1, std2;`
# Προαιερέσεις
### ADMIN OPTION
- **Χρήση**: Για προνόμια συστήματος και ρόλους
- **Δικαιώματα**: Παραχώρηση, ανάκληση και διαγραφή ρόλων
- **Αυτόματη εκχώρηση**: Στον δημιουργό του ρόλου
### GRANT OPTION
- **Χρήση**: Για προνόμια αντικειμένων
- **Δικαιώματα**: Παραχώρηση προνομίων σε άλλους
- **Περιορισμός**: Δεν επιτρέπεται για ρόλους
# Πεδία Ορισμού Ασφάλειας
### Ρόλων
- Προνόμια που έχουν παραχωρηθεί στον ρόλο
- Ρόλοι που του έχουν παραχωρηθεί
### Χρηστών
- Προνόμια σε όλα τα αντικείμενα του σχήματός του
- Προνόμια που έχουν παραχωρηθεί άμεσα
- Προνόμια ενεργοποιημένων ρόλων
- Προνόμια της ομάδας PUBLIC
# Περιορισμοί στη Χρήση
### DDL Εντολές
- **Εφαρμόσιμα**: Όλα τα προνόμια μέσω ρόλων (εκτός `REFERENCES`)
- **Μη εφαρμόσιμα**: DML προνόμια για DDL completion μέσω ρόλων
### Χρονισμός Ισχύος
- **Προνόμια**: Άμεση ισχύς
- **Ρόλοι**: Ισχύς μετά από `SET ROLE` ή νέα σύνοδο
# Παρακολούθηση και εμφάνιση
### Σημαντικά Data Dictionary Views
- **DBA_SYS_PRIVS**: Προνόμια συστήματος
- **DBA_ROLE_PRIVS**: Παραχωρήσεις ρόλων
- **DBA_TAB_PRIVS**: Προνόμια αντικειμένων
- **DBA_ROLES**: Όλοι οι ρόλοι της βάσης
- **SESSION_ROLES**: Ενεργοί ρόλοι της συνόδου
- **SESSION_PRIVS**: Ενεργά προνόμια της συνόδου
### Παραδείγματα Ερωτημάτων
- `SELECT * FROM session_roles;` - Τρέχοντες ρόλοι
- `SELECT * FROM dba_sys_privs WHERE grantee = 'USER';` - Προνόμια χρήστη
- `SELECT * FROM role_tab_privs WHERE role = 'ROLE_NAME';` - Προνόμια ρόλου